<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <head>
        <meta charset="UTF-8"/>
        <title th:inline="text">[[${title}]]</title>

        <th:block th:include="header :: head"></th:block>
    </head>
    <body>
        <th:block th:include="header :: body"></th:block>

        <div class="panel">
            <h1 th:inline="text">[[${header}]]</h1>
            <a sec:authorize="hasAuthority('Manager')" class="productLink" th:href="@{/productEdit}"> Добавить</a>
            <div th:each="product : ${products}">
                <th:block ></th:block>
                <img th:src="@{'data:image/jpeg;base64,'+${product.imageBytes}}"/>
                <a class="productLink" th:href="@{/product(name=${product.name})}"> <span class="productName" th:text="${product.name}"/></a>
                <span th:text="${product.price}"/>
                <button  sec:authorize="!hasAuthority('Manager')" class="buyButton">Купить</button>
                <a sec:authorize="hasAuthority('Manager')" class="productLink" th:href="@{/productEdit(name=${product.name})}"> Редактировать</a>
                <br/>
            </div>
        </div>
        <script th:inline="javascript">
            $(".buyButton").click(addToCart);
        </script>
    </body>
</html>